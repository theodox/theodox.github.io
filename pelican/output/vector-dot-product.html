<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="./theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="./theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="stevet">
  <meta name="description" content="Posts and writings by stevet">

  <link href="/atom/%s_all.atom.xml" type="application/atom+xml" rel="alternate" title="static_site_test Atom" />

<meta name="keywords" content="math">

  <title>
    static_site_test
&ndash; Bagels and Coffee, or, the vector dot product and you  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href=".">
        <img src="./theme/images/logo.png" alt="logo">
      </a>
      <h2><a href=".">stevet</a></h2>
      <p></p>
      <ul>
        <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
        <li><a href="http://python.org/" target="_blank">Python.org</a></li>
        <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
        <li><a href="#" target="_blank">You can modify those links in your config file</a></li>
        <li><a href="#" target="_blank">You can add links in your config file</a></li>
        <li><a href="#" target="_blank">Another social link</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href=".">Index</a> &brvbar; <a href="./archives.html">Archives</a>
      &brvbar; <a href="/atom/%s_all.atom.xml">Atom</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h3><a href="./vector-dot-product.html">Bagels and Coffee, or, the vector dot product and you</a></h3>
  </div>
  <div class="article_text">
    <p>I’ve been boning up on my math lately.<br />
Like most TA’s I’ve cobbled together a bag of tricks from different situations
I’ve dealt with over the years, but I’ve never really gone back to shore up my
shaky high school trigonometry and pre-calculus. It’s certainly possible (at
least, I hope it is!) to be a good TA with only seat-of-the-pants math skills
— after all, we have parenting and scaling and all the other cool tricks in
our apps to do the heavy lifting for us. Still, I’ve been finding that paying
more attention to the math fundamentals is helping me solve problems more
efficiently and elegantly than my patented hack-and-slash techniques did.<br />
So, I’m starting an occasional series on some basic math concepts that I hope
will be useful to other TA’s. I know it’s been helpful to me - there’s nothing
that concentrates the mind like putting something out there on the internet
for public commentary - it’s really forces you to think things through… <em>At
least, as long as you’re not on Twitter</em>.  </p>
<p>To kick off the series, I want to start off with a simple operation that I use
all the time, the humble <a href="http://en.wikipedia.org/wiki/Dot_product">dot
product</a>. Also known as the 'scalar'
product, the dot is an operation for turning lists of numbers into a single
number. It’s also astonishingly useful for graphics. I’ve used it for years,
but only recently did I try to see how and <em>why</em> it works instead of just
relying on the second-hand assurance <em>that</em> it works.<br />
The dot is all about combining operations on lists. We always run into it in
the context of geometric vectors, but in the pure math world vector is just
another way of saying “list of similar numbers.” If you go to the coffee shop
every day and buy a $5 latte, its obviously going to cost $25 a week (Tote
that up over 48 work weeks a year - it's a lot of money! I bring instant. But
I digress). If you buy a $2 bagel on monday and a $3 cookie on Wednesday and
Friday, how much will it cost?:  </p>
<div class="highlight"><pre><span></span>5 * 5 = $25 for coffee  
2 * 1 = $2 for bagel  
3 * 2 = $6 for cookies
</pre></div>


<p>This makes $33 total a week (you really should bring in your snacks from home.
You'll save a ton!)<br />
Besides helping you save money on lunch, this is a classic (though non-3-d
related) example of the dot product in action. Dots are nothing more than a
structured way of multiplying two lists of numbers. In this case we have list
of prices:  </p>
<div class="highlight"><pre><span></span>[5, 2, 3]
</pre></div>


<p>and a list of quantities:  </p>
<div class="highlight"><pre><span></span>[5, 1, 2]
</pre></div>


<p>The dot operation merely multiplies the numbers in the same position in the
list and adds them together. As you can see, this is trivial math:  </p>
<div class="highlight"><pre><span></span>(5 * 5) +  (2 * 1) + (3 * 2)
</pre></div>


<p>Despite it's humble origins, however, this trick -- multiplying ordered pairs
of numbers and adding them up - is absolutely basic in 3-D graphics. The lists
of prices and quantities become vectors (in fact, general purpose algebra
calls any list a 'vector') and with a simple convention the dot product takes
on a very interesting and useful set of properties for TA’s to exploit.<br />
The most famous example of the dot product in graphics is <a href="http://en.wikipedia.org/wiki/Lambertian_reflectance">the original
Lambert shading
equation</a>:  </p>
<div class="highlight"><pre><span></span>N dot L
</pre></div>


<p>Where N is a surface normal and L is the angle of the incident light.  </p>
<p><a href="http://upload.wikimedia.org/wikipedia/commons/thumb/0/03/Vi
sualPhotometry_Fig2_from_Lambert'sPhotometria.jpg/2880px-
VisualPhotometry_Fig2_from_Lambert'sPhotometria.jpg"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/0/03/VisualPhotometry" title="_Fig2_from_Lambert'sPhotometria.jpg/2880px-VisualPhotometry_Fig2_from_Lambert' sPhotometria.jpg" /></a>  </p>
<hr />
<p>The 'Lambert shader' is based on this math textbook from 1760. How cool is
that?  </p>
<p>Lambertian shading is probably the single most common operation in computer
graphics, but it’s the same math as figuring out your coffee budget. Here’s
how the magical translation from bagels and coffee to shaded pixels works:<br />
Imagine a sphere being lit by a directional light from straight above, in
classic CG fashion. The vector to the light would be  </p>
<div class="highlight"><pre><span></span>[0, 0, 1]
</pre></div>


<p>On top of the sphere, the normal vector would point the same way - it too
would point up towards  </p>
<div class="highlight"><pre><span></span>[0, 0, 1]
</pre></div>


<p>The dot of these two is:  </p>
<div class="highlight"><pre><span></span>(0 * 0) + (0 * 0) + (1 * 1)
</pre></div>


<p>in other words, 1. This makes sense: our light is directly overhead, so the
sample point on top of the sphere receives the full incoming light. Compare
this to a point halfway down the sphere. A a normal point 45 degrees from the
vertical might be  </p>
<div class="highlight"><pre><span></span>[.707, 0, .707]
</pre></div>


<p>And the dot would be  </p>
<div class="highlight"><pre><span></span>(0 *.707) + (0 * 0) + (1 * .707)
</pre></div>


<p>or .707. That means this sample point is getting about 70% of the incoming
light. At the horizon of the sphere the dot will be <code>[0,0,1] dot [1, 0, 0]</code>.
This dots out to  </p>
<div class="highlight"><pre><span></span>(1 * 0) + (0 * 0) + (0 * 1)
</pre></div>


<p>or 0. This makes sense - at the horizon of the sphere the light is parallel to
the surface and imparts no light.<br />
Or, in pretty picture form:  </p>
<p><a href="http://www.upvector.com/pages/Tutorials/Intro%20to%20Shaders/images/
lambert1.gif"><img alt="" src="http://www.upvector.com/pages/Tutorials/Intro%20to%20Shaders/images/lambe" title="rt1.gif" /></a></p>
<h3>Wherefore art thou cos(theta)?</h3>
<p>So, it appears of this fancy-pants rendering is coming from the same bagels-
and-coffee trick. How come? Lambert’s law isn’t some simple interpolation -
it’s based on cosines, which give it the characteristic soft falloff around
the horizon. How does this work?<br />
The sharp-eyed reader might notice that all of the vectors in this example are
<em>normalized</em>, that is to say the length of all of the vectors in this example
are 1. That’s is the special convention that turns a plain-vanilla dot product
into a geometric proposition. As long as the vectors are normalized -- but
<strong>only</strong> if they are normalized -- the dot product of the light vector and the
normal vector is the cosine of the angle between the two vectors. That’s what
makes the nice soft falloff on a Lambert-lit object, but it has lots of other
properties as well.<br />
To understand how this bagels-and-coffee math turns into trigonometry,
remember that ‘normalizing’ a vector just means setting its length to one.
Visualize what happens if you sweep a 1-unit long line segment around in a
circle, starting from the horizontal. As the segment rotates, you can draw a
right triangle from it’s end point up or down to the horizontal axis, as in
the example below:  </p>
<p><a href="http://www.mathsisfun.com/geometry/images/circle-unit-sct.gif"><img alt="" src="http://www.mathsisfun.com/geometry/images/circle-unit-" title="sct.gif" /></a></p>
<p>If you recall your high-school trigonometry you’ll remember that the cosine of
an angle in a right triangle is the ratio between the side of a right triangle
next to the angle and the hypotenuse of the same triangle <em>(the “CAH” in
“<a href="http://www.mathwords.com/s/sohcahtoa.htm">SOHCAHTOA</a>,” if you learned it the
way I did)</em>. In this case, our hypotenuse is always 1 (it’s a unit line). so
the cosine is just the width of our right triangle. All of this works as
described <em>only</em> if the vectors are normalized,however - when your dots give
you wonky results, non-normalized vectors are always the first thing to look
for.<br />
<em><a href="https://www.youtube.com/watch?v=ZffZvSH285c">This video from Khan Academy</a>
gives you a more in-depth derivation if this description isn’t clear.</em><br />
Once you grasp the unit-circle-cosine setup, it’s easy to see how dotting unit
vectors creates cosine values rather than lunch budgets. See what happens when
you dot a random vector against <code>[1,0,0]</code>:  </p>
<div class="highlight"><pre><span></span>example = [.866, .5, 0]  
reference = [1, 0, 0]  
example dot reference = (.866 * 1) + (.5 * 0) + (0 * 0) = .866
</pre></div>


<p>As you can see the X component of the example vector has been preserved, but
the other two are zeroed out. (This illustrates the meaning of the dot project
- it’s the <em>projection</em> of one vector on to another. We’ll touch on that more
in the next post).<br />
In this case, projecting that 60 degree line segment onto the vector
<code>[1,0,0]</code>creates a line segment from <code>[0,0,0]</code>to <code>[.866,0,0]</code> and the same
kind of right triangle we described above. The ratio of the hypotenuse vector
to this new ‘adjacent’ vector is .866 / 1, that is, plain old .866 — which we
we know from the unit circle is the cosine of 60 degrees and the answer we
were looking for.<br />
This is how the dot of two normalized (!) vectors is alway the cosine of the
angle between them.  </p>
<h3>Dot's all, folks</h3>
<p>So that's the basic theory of the dot product. Of course what the ruthlessly
practical TA will want to know about is uses, not theory. Some of the
applications will be obvious but there is a
<a href="https://www.youtube.com/watch?v=-mTUmczVdik">plethora</a> of less obvious ways
the dot product can make your life eaiser. I’ll hit those in my next post.  In
the meantime, bring instant coffee instead of paying for that venti tripple
mocchachino every day. That stuff’ll totally blow your budget.  </p>
<h3>Posts in this series</h3>
<ul>
<li><a href="http://techartsurvival.blogspot.com/2014/11/bagels-and-coffee-or-vector-dot-product.html">Bagels and Coffee (intro to dot products)</a></li>
<li><a href="http://techartsurvival.blogspot.com/2014/11/dots-all-folks.html">Dots All Folks (dot product uses)</a></li>
<li><a href="http://techartsurvival.blogspot.com/2014/12/dot-matrix.html">Dot Matrix (intro to matrices)</a></li>
<li><a href="http://techartsurvival.blogspot.com/2014/12/adventures-in-4th-dimension.html">Adventures in the 4th Dimension (translation matrices)</a></li>
<li><a href="http://techartsurvival.blogspot.com/2015/01/to-scale.html">To Scale! (scale matrices)</a></li>
</ul>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 22 November 2014</p>
    <p>Category: <a href="./category/blog.html">blog</a>
 &ndash; Tags:
      <a href="./tag/math.html">math</a>    </p>
  </div>


</article>


    <div id="ending_message">
      <p>&copy; stevet. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>