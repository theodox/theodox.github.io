<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="./theme/stylesheet/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="./theme/stylesheet/font-awesome.min.css">


    <link href="http://blog.theodox.com/atom/%s_all.atom.xml" type="application/atom+xml" rel="alternate" title="theodox.com Atom">



  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />

<meta name="author" content="Steve Theodore" />
<meta name="description" content="This page is a collection of little bits of useful info that are too small to merit their own blog posts" />
<meta name="keywords" content="programming, techart, maya">
<meta property="og:site_name" content="theodox.com"/>
<meta property="og:title" content="Good tricks"/>
<meta property="og:description" content="This page is a collection of little bits of useful info that are too small to merit their own blog posts"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="./Good-tricks.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2014-10-29 19:12:00-07:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="./author/steve-theodore.html">
<meta property="article:section" content="Tips and tricks"/>
<meta property="article:tag" content="programming"/>
<meta property="article:tag" content="techart"/>
<meta property="article:tag" content="maya"/>
<meta property="og:image" content="">
  <title>theodox.com &ndash; Good tricks</title>
</head>
<body>
  <aside>
    <div>
      <a href=".">
        <img src="./theme/img/profile.png" alt="" title="">
      </a>
      <h1><a href="."></a></h1>
      <p></p>
      <nav>
        <ul class="list">
          <li><a href="index.html" target="_blank">home</a></li>
          <li><a href="http://python.org/" target="_blank">Python.org</a></li>
          <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
          <li><a href="#" target="_blank">You can modify those links in your config file</a></li>
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/stevetheodore" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/theodox" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-google" href="https://plus.google.com/u/0/+SteveTheodore480BC/posts" target="_blank"><i class="fa fa-google"></i></a></li>
        <li><a class="sc-stack-overflow" href="http://stackoverflow.com/users/1936075/theodox" target="_blank"><i class="fa fa-stack-overflow"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href=".">Home</a>
      <a href="TA-Bookstore-page.html">book store</a>
      <a href="http://blog.theodox.com/atom/%s_all.atom.xml">Atom</a>
    </nav>

<article>
  <header>
    <h1 id="Good-tricks">Good tricks</h1>
    <p>Posted on Wed 29 October 2014 in <a href="./category/tips-and-tricks.html">Tips and tricks</a></p>
  </header>
  <div>
    <p>This page is a collection of little bits of useful info that are too small to merit their own blog posts.  They aren't in any particular order but they can be very useful.</p>
<hr />
<h2>itertools is your friend</h2>
<p>The itertools module is a bit of Python arcana that many people overlook.  For an in-depth look , <a href="http://pymotw.com/2/itertools/index.html">Doug Hellman's PyMOTW article</a> is a great overview.. Here are some of the highlights:</p>
<p><strong>itertools.chain</strong> is a fast way to string a list of iterables together. For example, you might have a list of lists - say, a bunch of component selections in Maya - and want to combine them into a single list.  It creates a generator that you can run through one item at a time or convert to a list with a list comprehension   </p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">itertools</span>  
<span class="n">cube_verts</span> <span class="o">=</span>  <span class="p">[</span><span class="s1">&#39;pCube1.vtx[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;pCube1.vtx[2]&#39;</span><span class="p">,</span> <span class="s1">&#39;pCube1.vtx[4]&#39;</span><span class="p">,</span> <span class="s1">&#39;pCube1.vtx[5]&#39;</span><span class="p">]</span>  
<span class="n">sphere_verts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pSphere1.vtx[10]&#39;</span><span class="p">,</span> <span class="s1">&#39;pSphere1.vtx[11]&#39;</span><span class="p">,</span> <span class="s1">&#39;pSphere1.vtx[12]&#39;</span><span class="p">,</span> <span class="s1">&#39;pSphere1.vtx[99]&#39;</span><span class="p">]</span>  
<span class="n">plane_verts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pPlane1.vtx[2]&#39;</span><span class="p">,</span> <span class="s1">&#39;pPlane1.vtx[20]&#39;</span><span class="p">,</span> <span class="s1">&#39;pPlane1.vtx[200]&#39;</span><span class="p">,</span> <span class="s1">&#39;pPlane1.vtx[202]&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">cube_verts</span><span class="p">,</span> <span class="n">sphere_verts</span><span class="p">,</span> <span class="n">plane_verts</span><span class="p">):</span>  
    <span class="k">print</span> <span class="n">item</span>

<span class="c1">#pCube1.vtx[1]  </span>
<span class="c1">#pCube1.vtx[2]  </span>
<span class="c1">#pCube1.vtx[4]  </span>
<span class="c1">#pCube1.vtx[5]  </span>
<span class="c1">#pSphere1.vtx[10]  </span>
<span class="c1">#pSphere1.vtx[11]  </span>
<span class="c1">#pSphere1.vtx[12]  </span>
<span class="c1">#pSphere1.vtx[99]  </span>
<span class="c1">#pPlane1.vtx[2]  </span>
<span class="c1">#pPlane1.vtx[20]  </span>
<span class="c1">#pPlane1.vtx[200]  </span>
<span class="c1">#pPlane1.vtx[202]</span>
</pre></div>


<p><strong>itertools.product</strong> will give you a generator that produces all the combinations of multiple iterable items. For example:  </p>
<div class="highlight"><pre><span></span>axes = (&#39;x&#39;, &#39;y&#39;, &#39;z&#39;)  
dimensions = (-1, 0, 1)  
print [i for i in itertools.product(axes, dimensions)]  
# [(&#39;x&#39;, -1), (&#39;x&#39;, 0), (&#39;x&#39;, 1), (&#39;y&#39;, -1), (&#39;y&#39;, 0), (&#39;y&#39;, 1), (&#39;z&#39;, -1), (&#39;z&#39;, 0), (&#39;z&#39;, 1)]
</pre></div>


<hr />
<h2>regex testers</h2>
<p>Regular aexpressions are powerful.  They are also ridiculous artifacts of the dark ages when superstitious programmers seemed to believe that every keystroke incurred the displeasure of the computing gods.  Figuring out a regex from scratch is all to often a frustrating exercise, so it's great to have an interactive tool to let you experiment in a nice, safe environment instead of trying to write your regexes and your actual tools st the same time.</p>
<p>For Pythonista's, try <a href="https://pythex.org/">Pythex</a>.</p>
<p>C# / dotnet programmers can use <a href="http://regexstorm.net/tester">Regex Storm</a> </p>
<hr />
<h2><strong>Maya list returns</strong></h2>
<p>Before maya 2014, cmds had several commands with an annoying, anti-pythonic behaviour: if you ask a question that usually returns a list but get no results, Maya will return <em>None</em> instead of an empty list. The most common example is a call to <em>cmds.ls</em> which returns nothing:  </p>
<div class="highlight"><pre><span></span>good_stuff = cmds.ls(type=&#39;mesh&#39;)  
for item in good_stuff:  
    do_something(item)  
# ERROR: NoneType is not iterable
</pre></div>


<p>Luckily, Python has a handy language feature that makes it easy to avoid this trap without an extra if test. If you change the ls like so:   </p>
<div class="highlight"><pre><span></span>good_stuff = cmds.ls(type=&#39;mesh&#39;) or []  
for item in good_stuff:  
    do_something(item)
</pre></div>


<p>The <code>or []</code> will pass a list result with something in it unchanged; but if the result is None, the or will substitute the empty list. Everything downstream from there can rely on the presence of a real list, even if it's empty   </p>
<hr />
<h2>Maya-like selection-or-list behavior</h2>
<p>If you want to make a function that behaves like the default maya commands -- that is, it works on arguments you pass or on selected objects -- you can combine the *args variable input and the or [] trick to make a nice one liner :</p>
<div class="highlight"><pre><span></span>def mayalike(*args):  
     my_objects = args or cmds.ls(sl=True) or []  
     for item in my_objects:  
           #do stuff
</pre></div>


<p>This will use <code>args</code> if provided and the result of <code>cmds.ls(sl=True)</code> if not. Since the <code>or []</code> is at the end you can always iterate on it regardless of the arguments or the state of the Maya selection.</p>
<hr />
<h2>Python multiple assignment</h2>
<p>Python has a handy trick of unpacking iterables in a single assigment call.  This lets you write things like:</p>
<div class="highlight"><pre><span></span>rotation = [ 0, 90, 0 ]
rx, ry, rz = rotation
</pre></div>


<p>which saves some annoying boilderplate.  It can be especially useful when dealing with functions that produce tuple or list results:</p>
<div class="highlight"><pre><span></span>filename, extension = os.splitext(completefilename)
</pre></div>


<p>which is much more elegant than</p>
<div class="highlight"><pre><span></span>results = os.splitext(completefilename)
filename = results[0]
extension = results[1]
</pre></div>


<p>It's a good idea, though, to resist the temptation to overdo it: if you find yourself unpacking long tuples a lot:</p>
<div class="highlight"><pre><span></span>name, address, state, zip, phone = customer
</pre></div>


<p>that's a good sign that customer should be a dictionary, a class, or -- best of all -- a <a href="http://pymotw.com/2/collections/namedtuple.html"><code>namedtuple</code></a>so you can parse it reliably. </p>
<hr />
<h3>Learn to love Mayapy</h3>
<p>If you're doing a lot of work that involves restarting and reloading maya - particularly if you're iterating on one script that involves a bunch of setup work -- the common trick is to keep all of your steps in a python tab in your listener.  It's better than nothing, but it's still pretty slow, since you need to start up Maya and wait for the gui to finish loading which takes several seconds at best. </p>
<p>If what you're working on does not require GUI access, you can use MayaPy.exe and the <code>-c</code> and <code>-i</code> flags to get into your script quickly. The <code>-c</code> flag launches mayapy and runs a command, and the <code>-i</code> flag keeps the  interpreter running. So you can boot mayapy directly into a running, headless copy of maya python like this:  </p>
<div class="highlight"><pre><span></span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">maya</span><span class="o">.</span><span class="n">py</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import maya.standalone; maya.standalone.initialize()&quot;</span>
</pre></div>


<p>Obviously you could put your test setup in a separate module and import that after standalone. I've found this saves me a <em>huge</em> amount of time when I'm iterating on something that doesn't need GUI.  I stick this into a button in my IDE or make a shell alias / bat script to do it.  </p>
<hr />
<h2><a href="http://lesterbanks.com/2014/01/maya-using-transfer-attributes-as-a-shrink-wrap-deformer/">http://lesterbanks.com/2014/01/maya-using-transfer-attributes-as-a-shrink-wrap-deformer/</a></h2>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="./tag/programming.html">programming</a>
      <a href="./tag/techart.html">techart</a>
      <a href="./tag/maya.html">maya</a>
    </p>
  </div>
</article>

    <footer>
        <p>&copy; Steve Theodore 2016</p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "name": "Good tricks",
  "headline": "Good tricks",
  "datePublished": "2014-10-29 19:12:00-07:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Steve Theodore",
    "url": "./author/steve-theodore.html"
  },
  "image": "{{ SITEURL }}/{{ THEME_STATIC_DIR }}/img/profile.png",
  "url": "./Good-tricks.html",
  "description": "This page is a collection of little bits of useful info that are too small to merit their own blog posts"
}
</script></body>
</html>