<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <title>Good&nbsp;tricks</title>

            <link href="https://theodox.github.io/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Chimeras & Manticores Full Atom Feed" />
            <link href="https://theodox.github.io/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Chimeras & Manticores Full RSS Feed" />
        <!-- Bootstrap Core CSS -->
        <link href="https://theodox.github.io/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="https://theodox.github.io/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="https://theodox.github.io/theme/css/code_blocks/zenburn.css" rel="stylesheet">

            <!-- CSS specified by the user -->
            <link href="https://theodox.github.io/theme/css/theodox.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

                <meta property="og:locale" content="">
		<meta property="og:site_name" content="Chimeras & Manticores">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://theodox.github.io/">Chimeras & Manticores</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                        <li><a href="/about">About...</a></li>
                        <li><a href="/pages/pub">Publications</a></li>
                        <li><a href="http://astore.amazon.com/tecsurgui-20">Tech-Art Book Store</a></li>
                        <li><a href="/pages/cookbook">Cookbook</a></li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('https://theodox.github.io/theme/images/home-bg.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Good&nbsp;tricks</h1>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <article>
        <p>This page is a collection of little bits of useful info that are too small to merit their own blog posts.  They aren&#8217;t in any particular order but they can be very&nbsp;useful.</p>
<hr />
<h2>itertools is your&nbsp;friend</h2>
<p>The itertools module is a bit of Python arcana that many people overlook.  For an in-depth look , <a href="http://pymotw.com/2/itertools/index.html">Doug Hellman&#8217;s PyMOTW article</a> is a great overview.. Here are some of the&nbsp;highlights:</p>
<p><strong>itertools.chain</strong> is a fast way to string a list of iterables together. For example, you might have a list of lists - say, a bunch of component selections in Maya - and want to combine them into a single list.  It creates a generator that you can run through one item at a time or convert to a list with a list&nbsp;comprehension   </p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">itertools</span>  
<span class="n">cube_verts</span> <span class="o">=</span>  <span class="p">[</span><span class="s1">&#39;pCube1.vtx[1]&#39;</span><span class="p">,</span> <span class="s1">&#39;pCube1.vtx[2]&#39;</span><span class="p">,</span> <span class="s1">&#39;pCube1.vtx[4]&#39;</span><span class="p">,</span> <span class="s1">&#39;pCube1.vtx[5]&#39;</span><span class="p">]</span>  
<span class="n">sphere_verts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pSphere1.vtx[10]&#39;</span><span class="p">,</span> <span class="s1">&#39;pSphere1.vtx[11]&#39;</span><span class="p">,</span> <span class="s1">&#39;pSphere1.vtx[12]&#39;</span><span class="p">,</span> <span class="s1">&#39;pSphere1.vtx[99]&#39;</span><span class="p">]</span>  
<span class="n">plane_verts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pPlane1.vtx[2]&#39;</span><span class="p">,</span> <span class="s1">&#39;pPlane1.vtx[20]&#39;</span><span class="p">,</span> <span class="s1">&#39;pPlane1.vtx[200]&#39;</span><span class="p">,</span> <span class="s1">&#39;pPlane1.vtx[202]&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">cube_verts</span><span class="p">,</span> <span class="n">sphere_verts</span><span class="p">,</span> <span class="n">plane_verts</span><span class="p">):</span>  
    <span class="k">print</span> <span class="n">item</span>

<span class="c1">#pCube1.vtx[1]  </span>
<span class="c1">#pCube1.vtx[2]  </span>
<span class="c1">#pCube1.vtx[4]  </span>
<span class="c1">#pCube1.vtx[5]  </span>
<span class="c1">#pSphere1.vtx[10]  </span>
<span class="c1">#pSphere1.vtx[11]  </span>
<span class="c1">#pSphere1.vtx[12]  </span>
<span class="c1">#pSphere1.vtx[99]  </span>
<span class="c1">#pPlane1.vtx[2]  </span>
<span class="c1">#pPlane1.vtx[20]  </span>
<span class="c1">#pPlane1.vtx[200]  </span>
<span class="c1">#pPlane1.vtx[202]</span>
</pre></div>


<p><strong>itertools.product</strong> will give you a generator that produces all the combinations of multiple iterable items. For&nbsp;example:  </p>
<div class="highlight"><pre><span></span>axes = (&#39;x&#39;, &#39;y&#39;, &#39;z&#39;)  
dimensions = (-1, 0, 1)  
print [i for i in itertools.product(axes, dimensions)]  
# [(&#39;x&#39;, -1), (&#39;x&#39;, 0), (&#39;x&#39;, 1), (&#39;y&#39;, -1), (&#39;y&#39;, 0), (&#39;y&#39;, 1), (&#39;z&#39;, -1), (&#39;z&#39;, 0), (&#39;z&#39;, 1)]
</pre></div>


<hr />
<h2>regex&nbsp;testers</h2>
<p>Regular aexpressions are powerful.  They are also ridiculous artifacts of the dark ages when superstitious programmers seemed to believe that every keystroke incurred the displeasure of the computing gods.  Figuring out a regex from scratch is all to often a frustrating exercise, so it&#8217;s great to have an interactive tool to let you experiment in a nice, safe environment instead of trying to write your regexes and your actual tools st the same&nbsp;time.</p>
<p>For Pythonista&#8217;s, try <a href="https://pythex.org/">Pythex</a>.</p>
<p>C# / dotnet programmers can use <a href="http://regexstorm.net/tester">Regex&nbsp;Storm</a> </p>
<hr />
<h2><strong>Maya list&nbsp;returns</strong></h2>
<p>Before maya 2014, cmds had several commands with an annoying, anti-pythonic behaviour: if you ask a question that usually returns a list but get no results, Maya will return <em>None</em> instead of an empty list. The most common example is a call to <em>cmds.ls</em> which returns&nbsp;nothing:  </p>
<div class="highlight"><pre><span></span>good_stuff = cmds.ls(type=&#39;mesh&#39;)  
for item in good_stuff:  
    do_something(item)  
# ERROR: NoneType is not iterable
</pre></div>


<p>Luckily, Python has a handy language feature that makes it easy to avoid this trap without an extra if test. If you change the ls like&nbsp;so:   </p>
<div class="highlight"><pre><span></span>good_stuff = cmds.ls(type=&#39;mesh&#39;) or []  
for item in good_stuff:  
    do_something(item)
</pre></div>


<p>The <code>or []</code> will pass a list result with something in it unchanged; but if the result is None, the or will substitute the empty list. Everything downstream from there can rely on the presence of a real list, even if it&#8217;s&nbsp;empty   </p>
<hr />
<h2>Maya-like selection-or-list&nbsp;behavior</h2>
<p>If you want to make a function that behaves like the default maya commands &#8212; that is, it works on arguments you pass or on selected objects &#8212; you can combine the *args variable input and the or [] trick to make a nice one liner&nbsp;:</p>
<div class="highlight"><pre><span></span>def mayalike(*args):  
     my_objects = args or cmds.ls(sl=True) or []  
     for item in my_objects:  
           #do stuff
</pre></div>


<p>This will use <code>args</code> if provided and the result of <code>cmds.ls(sl=True)</code> if not. Since the <code>or []</code> is at the end you can always iterate on it regardless of the arguments or the state of the Maya&nbsp;selection.</p>
<hr />
<h2>Python multiple&nbsp;assignment</h2>
<p>Python has a handy trick of unpacking iterables in a single assigment call.  This lets you write things&nbsp;like:</p>
<div class="highlight"><pre><span></span>rotation = [ 0, 90, 0 ]
rx, ry, rz = rotation
</pre></div>


<p>which saves some annoying boilderplate.  It can be especially useful when dealing with functions that produce tuple or list&nbsp;results:</p>
<div class="highlight"><pre><span></span>filename, extension = os.splitext(completefilename)
</pre></div>


<p>which is much more elegant&nbsp;than</p>
<div class="highlight"><pre><span></span>results = os.splitext(completefilename)
filename = results[0]
extension = results[1]
</pre></div>


<p>It&#8217;s a good idea, though, to resist the temptation to overdo it: if you find yourself unpacking long tuples a&nbsp;lot:</p>
<div class="highlight"><pre><span></span>name, address, state, zip, phone = customer
</pre></div>


<p>that&#8217;s a good sign that customer should be a dictionary, a class, or &#8212; best of all &#8212; a <a href="http://pymotw.com/2/collections/namedtuple.html"><code>namedtuple</code></a>so you can parse it&nbsp;reliably. </p>
<hr />
<h3>Learn to love&nbsp;Mayapy</h3>
<p>If you&#8217;re doing a lot of work that involves restarting and reloading maya - particularly if you&#8217;re iterating on one script that involves a bunch of setup work &#8212; the common trick is to keep all of your steps in a python tab in your listener.  It&#8217;s better than nothing, but it&#8217;s still pretty slow, since you need to start up Maya and wait for the gui to finish loading which takes several seconds at&nbsp;best. </p>
<p>If what you&#8217;re working on does not require <span class="caps">GUI</span> access, you can use MayaPy.exe and the <code>-c</code> and <code>-i</code> flags to get into your script quickly. The <code>-c</code> flag launches mayapy and runs a command, and the <code>-i</code> flag keeps the  interpreter running. So you can boot mayapy directly into a running, headless copy of maya python like&nbsp;this:  </p>
<div class="highlight"><pre><span></span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">maya</span><span class="o">.</span><span class="n">py</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;import maya.standalone; maya.standalone.initialize()&quot;</span>
</pre></div>


<p>Obviously you could put your test setup in a separate module and import that after standalone. I&#8217;ve found this saves me a <em>huge</em> amount of time when I&#8217;m iterating on something that doesn&#8217;t need <span class="caps">GUI</span>.  I stick this into a button in my <span class="caps">IDE</span> or make a shell alias / bat script to do&nbsp;it.  </p>
<hr />
<h2><a href="http://lesterbanks.com/2014/01/maya-using-transfer-attributes-as-a-shrink-wrap-deformer/">http://lesterbanks.com/2014/01/maya-using-transfer-attributes-as-a-shrink-wrap-deformer/</a></h2>
    </article>
            </div>
            <!---- right sidebar -->
<div class="right-sidebar col-lg-2 col-md-1">
    <div class="vertical-spacer">
    <h4>@social</h4>
        <ul class="list-inline text-center">
                <li>
                    <a href="https://www.linkedin.com/in/stevetheodore">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/theodox">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="https://plus.google.com/u/0/+SteveTheodore480BC/posts">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-google fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="http://stackoverflow.com/users/1936075/theodox">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
        </ul>
    </div>
    <div class="vertical-spacer">
        <h4>#tags</h4>
        <a href="/tags">tag list</a>
        
            <a class="tag-link" href="https://theodox.github.io/tag/animation.html">animation</a>
            <a class="tag-link" href="https://theodox.github.io/tag/api.html">api</a>
            <a class="tag-link" href="https://theodox.github.io/tag/articles.html">articles</a>
            <a class="tag-link" href="https://theodox.github.io/tag/blog.html">blog</a>
            <a class="tag-link" href="https://theodox.github.io/tag/blogging.html">blogging</a>
            <a class="tag-link" href="https://theodox.github.io/tag/boo.html">boo</a>
            <a class="tag-link" href="https://theodox.github.io/tag/books.html">books</a>
            <a class="tag-link" href="https://theodox.github.io/tag/bugs.html">bugs</a>
            <a class="tag-link" href="https://theodox.github.io/tag/careers.html">careers</a>
            <a class="tag-link" href="https://theodox.github.io/tag/cg.html">cg</a>
            <a class="tag-link" href="https://theodox.github.io/tag/community.html">community</a>
            <a class="tag-link" href="https://theodox.github.io/tag/console.html">console</a>
            <a class="tag-link" href="https://theodox.github.io/tag/distribution.html">distribution</a>
            <a class="tag-link" href="https://theodox.github.io/tag/games.html">games</a>
            <a class="tag-link" href="https://theodox.github.io/tag/gdc.html">gdc</a>
            <a class="tag-link" href="https://theodox.github.io/tag/graphics.html">graphics</a>
            <a class="tag-link" href="https://theodox.github.io/tag/gui.html">gui</a>
            <a class="tag-link" href="https://theodox.github.io/tag/industry.html">industry</a>
            <a class="tag-link" href="https://theodox.github.io/tag/ls.html">ls</a>
            <a class="tag-link" href="https://theodox.github.io/tag/markdown.html">markdown</a>
            <a class="tag-link" href="https://theodox.github.io/tag/math.html">math</a>
            <a class="tag-link" href="https://theodox.github.io/tag/matrix.html">matrix</a>
            <a class="tag-link" href="https://theodox.github.io/tag/maya.html">maya</a>
            <a class="tag-link" href="https://theodox.github.io/tag/mgui.html">mGui</a>
            <a class="tag-link" href="https://theodox.github.io/tag/minq.html">minq</a>
            <a class="tag-link" href="https://theodox.github.io/tag/modeling.html">modeling</a>
            <a class="tag-link" href="https://theodox.github.io/tag/modelling.html">modelling</a>
            <a class="tag-link" href="https://theodox.github.io/tag/modo.html">modo</a>
            <a class="tag-link" href="https://theodox.github.io/tag/modules.html">modules</a>
            <a class="tag-link" href="https://theodox.github.io/tag/moonrise.html">moonrise</a>
            <a class="tag-link" href="https://theodox.github.io/tag/photoshop.html">photoshop</a>
            <a class="tag-link" href="https://theodox.github.io/tag/pipeline.html">pipeline</a>
            <a class="tag-link" href="https://theodox.github.io/tag/programming.html">programming</a>
            <a class="tag-link" href="https://theodox.github.io/tag/python.html">python</a>
            <a class="tag-link" href="https://theodox.github.io/tag/regex.html">regex</a>
            <a class="tag-link" href="https://theodox.github.io/tag/research.html">research</a>
            <a class="tag-link" href="https://theodox.github.io/tag/rigging.html">rigging</a>
            <a class="tag-link" href="https://theodox.github.io/tag/sfx.html">sfx</a>
            <a class="tag-link" href="https://theodox.github.io/tag/shaders.html">shaders</a>
            <a class="tag-link" href="https://theodox.github.io/tag/siggraph.html">siggraph</a>
            <a class="tag-link" href="https://theodox.github.io/tag/sod.html">SOD</a>
            <a class="tag-link" href="https://theodox.github.io/tag/spelcheck.html">spelcheck</a>
            <a class="tag-link" href="https://theodox.github.io/tag/standalone.html">standalone</a>
            <a class="tag-link" href="https://theodox.github.io/tag/ta.html">TA</a>
            <a class="tag-link" href="https://theodox.github.io/tag/talks.html">talks</a>
            <a class="tag-link" href="https://theodox.github.io/tag/techart.html">techart</a>
            <a class="tag-link" href="https://theodox.github.io/tag/thunderbirds.html">thunderbirds</a>
            <a class="tag-link" href="https://theodox.github.io/tag/tools.html">tools</a>
            <a class="tag-link" href="https://theodox.github.io/tag/unity.html">unity</a>
            <a class="tag-link" href="https://theodox.github.io/tag/web.html">web</a>
            <a class="tag-link" href="https://theodox.github.io/tag/writing.html">writing</a>
    </div>
    <div class="vertical-spacer">
        <h4>archives</h4>
        <div>
          <a href="/archives">all</a>
        </div>      
        <div>
        <a href="/2013/index.html">2013</a>
        </div>      
        <div>
        <a href="/2014/index.html">2014</a>
        </div>      
        <div>
        <a href="/2015/index.html">2015</a>
        </div>      
        <div>
        <a href="/2016/index.html">2016</a>
        </div>
    </div> 
    <div class="vertical-spacer">
        <h4>feeds </h4>
        <p class="feed-button"><a href="/feeds/atom.xml">Atom</a></p>
        <p class="feed-button"><a href="/feeds/rss.xml">Rss</a>&nbsp;</p>
    </div>   

</div>        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

<p class="copyright text-muted">
   	Site contents &copy; Steve Theodore.  Blog powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://python.org">Python</a>.
</p>                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://theodox.github.io/theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="https://theodox.github.io/theme/js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="https://theodox.github.io/theme/js/clean-blog.min.js"></script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-79232212-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'theodoxcom';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>

</html>