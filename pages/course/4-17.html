<!DOCTYPE html>
<html lang="en">
<head>
        <title>Shooting&nbsp;Rays</title>
        <meta charset="utf-8" />
        <link href="http://theodox.com/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Chimeras & Manticores Full Atom Feed" />
        <link href="http://theodox.com/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Chimeras & Manticores Full RSS Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://theodox.com/">Chimeras & Manticores <strong>technical art, python, the games business, and obscurantism</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/about">About...</a></li>
            <li><a href="/pages/pub">Publications</a></li>
            <li><a href="http://astore.amazon.com/tecsurgui-20">Tech-Art Book Store</a></li>
            <li><a href="/pages/cookbook">Cookbook</a></li>
        </ul></nav><!-- /#menu -->
    <h1>Shooting&nbsp;Rays</h1>
    

    <p>To get a 3d position you get the ray from the camera and then check it using <strong><a href="http://docs.unity3d.com/Documentation/ScriptReference/Physics.Raycast.html">Physics.Raycast</a></strong>.</p>
<ol>
<li>Create a new&nbsp;scene.</li>
<li>Add a plane (<strong>GameObject &gt;&gt; Create Other &gt; Plane</strong>)</li>
<li>Position the main camera so it has a good view of the whole plane (use the <strong>Ctrl+Shift+F</strong> trick if that makes it&nbsp;faster).</li>
<li>Create a cube (<strong>GameObject &gt;&gt; Create Other &gt; Cube</strong>)</li>
<li>In the project window, create a new script (<strong>Right click &gt; Create &gt; C# Script</strong>). Call it <strong>RayTest</strong></li>
<li>Add it to the&nbsp;cube </li>
<li>Turn the cube&#8217;s <em>Collider</em> off using the checkbox in the inspector. This makes sure that we don&#8217;t get hits on the cube itself, just the&nbsp;plane.</li>
<li>In the Update method:<pre>
Ray test = Camera.main.ScreenPointToRay (Input.mousePosition);
RaycastHit hit;
if (Physics.Raycast (test, out hit)) 
    {
    Vector3 targetpos = new Vector3 (hit.point.x, 0.5f, hit.point.z);
    transform.position = targetpos;
    }</pre></li>
<li>Test it in Unity. The cube should follow the mouse around on the surface of the plane.
9 Try tilting the plane and running again. What happens?
10 Change<pre>
 Vector3 targetpos = new Vector3 (hit.point.x, 0.5f, hit.point.z);</pre>
to<pre> Vector3 targetpos = new Vector3 (hit.point.x, hitpoint.y + 0.5f, hit.point.z);</pre> and&nbsp;retry.</li>
</ol>
<p>Think about how you could use this trick with the goldfish example from last&nbsp;week&#8230;</p>
<p><a href="4-16">back</a> <a href="4-18">next</a></p>

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>