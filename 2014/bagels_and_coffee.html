
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet/less" type="text/css" href="https://theodox.github.io/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="https://theodox.github.io/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="https://theodox.github.io/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://theodox.github.io/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Chimeras & Manticores Atom">

    <link href="https://theodox.github.io/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Chimeras & Manticores RSS">


<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79232212-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<meta name="author" content="Steve Theodore" />
<meta name="description" content="An introduction to the vector dot product, and how it’s used in computer graphics." />
<meta name="keywords" content="math">

<meta property="og:site_name" content="Chimeras & Manticores"/>
<meta property="og:title" content="Bagels and Coffee, or, the vector dot product and you"/>
<meta property="og:description" content="An introduction to the vector dot product, and how it’s used in computer graphics."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://theodox.github.io/2014/bagels_and_coffee"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2014-11-22 11:46:00.004000-08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://theodox.github.io/author/steve-theodore.html">
<meta property="article:section" content="blog"/>
<meta property="article:tag" content="math"/>
<meta property="og:image" content="">

   <title>Chimeras & Manticores &ndash; Bagels and Coffee, or, the vector dot product and you</title>


    <link rel="canonical" href="https://theodox.github.io/2014/bagels_and_coffee"/>

  <script type="text/javascript">
    var host = "https://theodox.github.io";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
      window.location.protocol = "https";
  </script>

</head>
<body>



  <aside>
    <div>
      <h2>Chimeras & Manticores</h2>
      <a href="https://theodox.github.io">
        <img src="https://theodox.github.io/theme/img/profile.png" alt="" title="">
      </a>
      <h1><a href="https://theodox.github.io"></a></h1>

<p>a blog about technical art, python, the games business, and obscurantism</p>


      <ul class="social">
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/stevetheodore" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/theodox" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-google" href="https://plus.google.com/u/0/+SteveTheodore480BC/posts" target="_blank"><i class="fa fa-google"></i></a></li>
        <li><a class="sc-stack-overflow" href="http://stackoverflow.com/users/1936075/theodox" target="_blank"><i class="fa fa-stack-overflow"></i></a></li>
      </ul>

    <nav>
<!---if pages or LINKS -->


        <div>
          <h3 class="tagcloud_header">SUBJECTS</h3>
        </div>
        <ul class="tagcloud">
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/animation.html">
                animation
                        <span class="badge">(3)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/api.html">
                api
                        <span class="badge">(3)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/articles.html">
                articles
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/blog.html">
                blog
                        <span class="badge">(3)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/blogging.html">
                blogging
                        <span class="badge">(4)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/boo.html">
                boo
                        <span class="badge">(3)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/books.html">
                books
                        <span class="badge">(4)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/bugs.html">
                bugs
                        <span class="badge">(5)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/cg.html">
                cg
                        <span class="badge">(8)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/distribution.html">
                distribution
                        <span class="badge">(3)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/games.html">
                games
                        <span class="badge">(10)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/gdc.html">
                gdc
                        <span class="badge">(12)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/graphics.html">
                graphics
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/gui.html">
                gui
                        <span class="badge">(7)</span>
                </a>
            </li>
            <li class="tag-1">
                <a href="https://theodox.github.io/tag/industry.html">
                industry
                        <span class="badge">(33)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/jobs.html">
                jobs
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/markdown.html">
                markdown
                        <span class="badge">(3)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/math.html">
                math
                        <span class="badge">(5)</span>
                </a>
            </li>
            <li class="tag-1">
                <a href="https://theodox.github.io/tag/maya.html">
                maya
                        <span class="badge">(46)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/mgui.html">
                mgui
                        <span class="badge">(10)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/minq.html">
                minq
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/modeling.html">
                modeling
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/modules.html">
                modules
                        <span class="badge">(3)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/moonrise.html">
                moonrise
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/pipeline.html">
                pipeline
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-1">
                <a href="https://theodox.github.io/tag/programming.html">
                programming
                        <span class="badge">(37)</span>
                </a>
            </li>
            <li class="tag-1">
                <a href="https://theodox.github.io/tag/python.html">
                python
                        <span class="badge">(48)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/rigging.html">
                rigging
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-3">
                <a href="https://theodox.github.io/tag/sfx.html">
                sfx
                        <span class="badge">(2)</span>
                </a>
            </li>
            <li class="tag-1">
                <a href="https://theodox.github.io/tag/techart.html">
                techart
                        <span class="badge">(20)</span>
                </a>
            </li>
            <li class="tag-1">
                <a href="https://theodox.github.io/tag/tools.html">
                tools
                        <span class="badge">(16)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/unity.html">
                unity
                        <span class="badge">(4)</span>
                </a>
            </li>
            <li class="tag-2">
                <a href="https://theodox.github.io/tag/web.html">
                web
                        <span class="badge">(6)</span>
                </a>
            </li>
      </ul>
      </nav>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://theodox.github.io">    Home
</a>

      <a href="/about">About...</a>
      <a href="/pages/pub">Publications</a>
      <a href="/pages/cookbook">Cookbook</a>
      <a href="/archives">By date</a>
      <a href="/tags">By subject</a>

      <a href="https://theodox.github.io/feeds/atom.xml">    Atom
</a>

      <a href="https://theodox.github.io/feeds/rss.xml">    RSS
</a>
    </nav>

<article class="single">
  <header>
      
    <h1 id="bagels_and_coffee">Bagels and Coffee, or, the vector dot product and&nbsp;you</h1>
    <p>
          Posted on Sat 22 November 2014 in <a href="https://theodox.github.io/category/blog.html">blog</a>


    </p>
  </header>


  <div>
    <p>I’ve been boning up on my math&nbsp;lately.   </p>
<p>Like most <span class="caps">TA</span>’s I’ve cobbled together a bag of tricks from different situations I’ve dealt with over the years, but I’ve never really gone back to shore up my shaky high school trigonometry and pre-calculus. It’s certainly possible (at least, I hope it is!) to be a good <span class="caps">TA</span> with only seat-of-the-pants math skills — after all, we have parenting and scaling and all the other cool tricks in our apps to do the heavy lifting for us. Still, I’ve been finding that paying more attention to the math fundamentals is helping me solve problems more efficiently and elegantly than my patented hack-and-slash techniques did.<br>
So, I’m starting an occasional series on some basic math concepts that I hope will be useful to other <span class="caps">TA</span>’s. I know it’s been helpful to me - there’s nothing that concentrates the mind like putting something out there on the internet for public commentary - it’s really forces you to think things through… <em>At least, as long as you’re not on Twitter</em>.  </p>
<p>To kick off the series, I want to start off with a simple operation that I use all the time, the humble <a href="http://en.wikipedia.org/wiki/Dot_product">dot product</a>. Also known as the &#8216;scalar&#8217; product, the dot is an operation for turning lists of numbers into a single number. It’s also astonishingly useful for graphics. I’ve used it for years, but only recently did I try to see how and <em>why</em> it works instead of just relying on the second-hand assurance <em>that</em> it&nbsp;works.  </p>
<p>The dot is all about combining operations on lists. We always run into it in the context of geometric vectors, but in the pure math world vector is just another way of saying “list of similar numbers.” If you go to the coffee shop every day and buy a $5 latte, its obviously going to cost $25 a week (Tote that up over 48 work weeks a year - it&#8217;s a lot of money! I bring instant. But I digress). If you buy a $2 bagel on monday and a $3 cookie on Wednesday and Friday, how much will it&nbsp;cost?:  </p>
<div class="highlight"><pre><span></span>5 * 5 = $25 for coffee  
2 * 1 = $2 for bagel  
3 * 2 = $6 for cookies
</pre></div>


<p>This makes $33 total a week (you really should bring in your snacks from home. You&#8217;ll save a&nbsp;ton!)   </p>
<p>Besides helping you save money on lunch, this is a classic (though non-3-d related) example of the dot product in action. Dots are nothing more than a structured way of multiplying two lists of numbers. In this case we have list of&nbsp;prices:  </p>
<div class="highlight"><pre><span></span>[5, 2, 3]
</pre></div>


<p>and a list of&nbsp;quantities:  </p>
<div class="highlight"><pre><span></span>[5, 1, 2]
</pre></div>


<p>The dot operation merely multiplies the numbers in the same position in the list and adds them together. As you can see, this is trivial&nbsp;math:  </p>
<div class="highlight"><pre><span></span>(5 * 5) +  (2 * 1) + (3 * 2)
</pre></div>


<p>Despite it&#8217;s humble origins, however, this trick &#8212; multiplying ordered pairs of numbers and adding them up - is absolutely basic in 3-D graphics. The lists of prices and quantities become vectors (in fact, general purpose algebra calls any list a &#8216;vector&#8217;) and with a simple convention the dot product takes on a very interesting and useful set of properties for <span class="caps">TA</span>’s to exploit.<br>
The most famous example of the dot product in graphics is <a href="http://en.wikipedia.org/wiki/Lambertian_reflectance">the original Lambert shading equation</a>:  </p>
<div class="highlight"><pre><span></span>N dot L
</pre></div>


<p>Where N is a surface normal and L is the angle of the incident&nbsp;light.   </p>
<p><a href="http://upload.wikimedia.org/wikipedia/commons/thumb/0/03/VisualPhotometry_Fig2_from_Lambert'sPhotometria.jpg/2880px-VisualPhotometry_Fig2_from_Lambert'sPhotometria.jpg"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/0/03/VisualPhotometry_Fig2_from_Lambert'sPhotometria.jpg/2880px-VisualPhotometry_Fig2_from_Lambert'sPhotometria.jpg"></a>  </p>
<blockquote>
<p>The &#8216;Lambert shader&#8217; is based on this math textbook from 1760. How cool is&nbsp;that?  </p>
</blockquote>
<p>Lambertian shading is probably the single most common operation in computer graphics, but it’s the same math as figuring out your coffee budget. Here’s how the magical translation from bagels and coffee to shaded pixels works:<br>
Imagine a sphere being lit by a directional light from straight above, in classic <span class="caps">CG</span> fashion. The vector to the light would&nbsp;be   </p>
<div class="highlight"><pre><span></span>[0, 0, 1]
</pre></div>


<p>On top of the sphere, the normal vector would point the same way - it too would point up&nbsp;towards  </p>
<div class="highlight"><pre><span></span>[0, 0, 1]
</pre></div>


<p>The dot of these two&nbsp;is:  </p>
<div class="highlight"><pre><span></span>(0 * 0) + (0 * 0) + (1 * 1)
</pre></div>


<p>in other words, 1. This makes sense: our light is directly overhead, so the sample point on top of the sphere receives the full incoming light. Compare this to a point halfway down the sphere. A a normal point 45 degrees from the vertical might&nbsp;be   </p>
<div class="highlight"><pre><span></span>[.707, 0, .707]
</pre></div>


<p>And the dot would&nbsp;be  </p>
<div class="highlight"><pre><span></span>(0 *.707) + (0 * 0) + (1 * .707)
</pre></div>


<p>or .707. That means this sample point is getting about 70% of the incoming light. At the horizon of the sphere the dot will be <code>[0,0,1] dot [1, 0, 0]</code>. This dots out&nbsp;to   </p>
<div class="highlight"><pre><span></span>(1 * 0) + (0 * 0) + (0 * 1)
</pre></div>


<p>or 0. This makes sense - at the horizon of the sphere the light is parallel to the surface and imparts no light.<br>
Or, in pretty picture&nbsp;form:  </p>
<p><a href="http://www.upvector.com/pages/Tutorials/Intro%20to%20Shaders/images/lambert1.gif"><img alt="" src="http://www.upvector.com/pages/Tutorials/Intro%20to%20Shaders/images/lambert1.gif"></a></p>
<h2>Wherefore art thou&nbsp;cos(theta)?</h2>
<p>So, it appears of this fancy-pants rendering is coming from the same bagels-and-coffee trick. How come? Lambert’s law isn’t some simple interpolation - it’s based on cosines, which give it the characteristic soft falloff around the horizon. How does this work?<br>
The sharp-eyed reader might notice that all of the vectors in this example are <em>normalized</em>, that is to say the length of all of the vectors in this example are 1. That’s is the special convention that turns a plain-vanilla dot product into a geometric proposition. As long as the vectors are normalized &#8212; but <strong>only</strong> if they are normalized &#8212; the dot product of the light vector and the normal vector is the cosine of the angle between the two vectors. That’s what makes the nice soft falloff on a Lambert-lit object, but it has lots of other properties as well.<br>
To understand how this bagels-and-coffee math turns into trigonometry, remember that ‘normalizing’ a vector just means setting its length to one. Visualize what happens if you sweep a 1-unit long line segment around in a circle, starting from the horizontal. As the segment rotates, you can draw a right triangle from it’s end point up or down to the horizontal axis, as in the example&nbsp;below:  </p>
<p><a href="http://www.mathsisfun.com/geometry/images/circle-unit-sct.gif"><img alt="" src="http://www.mathsisfun.com/geometry/images/circle-unit-sct.gif"></a></p>
<p>If you recall your high-school trigonometry you’ll remember that the cosine of an angle in a right triangle is the ratio between the side of a right triangle next to the angle and the hypotenuse of the same triangle <em>(the “<span class="caps">CAH</span>” in “<a href="http://www.mathwords.com/s/sohcahtoa.htm"><span class="caps">SOHCAHTOA</span></a>,” if you learned it the way I did)</em>. In this case, our hypotenuse is always 1 (it’s a unit line). so  the cosine is just the width of our right triangle. All of this works as described <em>only</em> if the vectors are normalized,however - when your dots give you wonky results, non-normalized vectors are always the first thing to look for.<br>
<em><a href="https://www.youtube.com/watch?v=ZffZvSH285c">This video from Khan Academy</a> gives you a more in-depth derivation if this description isn’t clear.</em><br>
Once you grasp the unit-circle-cosine setup, it’s easy to see how dotting unit vectors creates cosine values rather than lunch budgets. See what happens when you dot a random vector against <code>[1,0,0]</code>:  </p>
<div class="highlight"><pre><span></span>example = [.866, .5, 0]  
reference = [1, 0, 0]  
example dot reference = (.866 * 1) + (.5 * 0) + (0 * 0) = .866
</pre></div>


<p>As you can see the X component of the example vector has been preserved, but the other two are zeroed out. (This illustrates the meaning of the dot project - it’s the <em>projection</em> of one vector on to another. We’ll touch on that more in the next&nbsp;post).   </p>
<p>In this case, projecting that 60 degree line segment onto the vector <code>[1,0,0]</code>creates a line segment from <code>[0,0,0]</code>to <code>[.866,0,0]</code> and the same kind of right triangle we described above. The ratio of the hypotenuse vector to this new ‘adjacent’ vector is .866 / 1, that is, plain old .866 — which we we know from the unit circle is the cosine of 60 degrees and the answer we were looking&nbsp;for.   </p>
<p>This is how the dot of two normalized (!) vectors is alway the cosine of the angle between&nbsp;them.  </p>
<h2>Dot&#8217;s all,&nbsp;folks</h2>
<p>So that&#8217;s the basic theory of the dot product. Of course what the ruthlessly practical <span class="caps">TA</span> will want to know about is uses, not theory. Some of the applications will be obvious but there is a <a href="https://www.youtube.com/watch?v=-mTUmczVdik">plethora</a> of less obvious ways the dot product can make your life eaiser. I’ll hit those in my next post.  In the meantime, bring instant coffee instead of paying for that venti tripple mocchachino every day. That stuff’ll totally blow your&nbsp;budget.  </p>
<h2>Posts in this&nbsp;series</h2>
<ul>
<li><a href="bagels_and_coffee.html">Bagels and Coffee (intro to dot&nbsp;products)</a></li>
<li><a href="dots_all_folks.html">Dots All Folks (dot product&nbsp;uses)</a></li>
<li><a href="dot_matrix.html">Dot Matrix (intro to&nbsp;matrices)</a></li>
<li><a href="adventures-in-4th-dimension.html">Adventures in the 4th Dimension (translation&nbsp;matrices)</a></li>
<li><a href="to-scale.html">To Scale! (scale&nbsp;matrices)</a></li>
</ul>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://theodox.github.io/tag/math.html">math</a>
    </p>
  </div>

<!--
  <div class="center social-share">
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
    <div class="addthis_inline_share_toolbox"></div>
  </div>
-->


    <div class="addthis_relatedposts_inline"></div>


<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'theodoxcom';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>&copy;  2018</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Chimeras & Manticores ",
  "url" : "https://theodox.github.io",
  "image": "",
  "description": ""
}
</script>


    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-575daef5596b169a"></script>

</body>
</html>