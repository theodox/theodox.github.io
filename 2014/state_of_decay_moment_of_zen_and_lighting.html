<!DOCTYPE html>
<html lang="en">
<head>
          <title>Chimeras & Manticores</title>
        <meta charset="utf-8" />
        <link href="http://theodox.com/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Chimeras & Manticores Full Atom Feed" />
        <link href="http://theodox.com/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Chimeras & Manticores Full RSS Feed" />



    <meta name="tags" content="games" />
    <meta name="tags" content="SOD" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://theodox.com/">Chimeras & Manticores <strong>technical art, python, the games business, and obscurantism</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/about">About...</a></li>
            <li><a href="/pages/pub">Publications</a></li>
            <li><a href="http://astore.amazon.com/tecsurgui-20">Tech-Art Book Store</a></li>
            <li><a href="/pages/cookbook">Cookbook</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="http://theodox.com/2014/state_of_decay_moment_of_zen_and_lighting" rel="bookmark"
         title="Permalink to State of Decay moment of zen (andÂ lighting)">State of Decay moment of zen  (and&nbsp;lighting)</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2014-01-07T10:00:00-08:00">
      Tue 07 January 2014
    </abbr>
    <address class="vcard author">
      By           <a class="url fn" href="http://theodox.com/author/steve-theodore.html">Steve Theodore</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p><a href="http://1.bp.blogspot.com/-Y1CcBO5iyig/UsujMjcxTRI/AAAAAAAAPCc/dIyL6T-pZQY/s1600/home_07.png"><img alt="" src="http://1.bp.blogspot.com/-Y1CcBO5iyig/UsujMjcxTRI/AAAAAAAAPCc/dIyL6T-pZQY/s1600/home_07.png" /></a>  </p>
<blockquote>
<p>Pastor Will found the Super Fudge&nbsp;Chunk.    </p>
</blockquote>
<p>The whole scene (except for that one spot of sunlight and the window) is lit entirely by ambient lighting with some vertex lighting and (small) point lights in the windows. What a nightmare - whatever we do in the next game, it won&#8217;t be&nbsp;this!  </p>
<p>There&#8217;s no lightmapping, thanks to a 24 hour continuous time of day cycle.  The houses could also be placed at any orientation, so the vertex lighting has to be pretty gentle - we shot basically ran a very smoothed out hemsipherical dome light outside the house, once with Final Gather and once with a dome of stochastically placed Maya point lights to create the illusion of darker interiors and lighter areas near windows). The final gather provided some bounce light look and the point lights provided a smooth gradient; blending the two helped eliminate hard artifacts and cut down on the frequency since we didn&#8217;t want real shadows which would be wrong as the sun moved.   We also ran a similar omnidirectional vert light pass on all the props to add depth to things like cabinets and shelving. I also did a little tool to try to do some vertex decimation on the lit meshes &#8212; we tended to subdivide the big planar areas heavily before lighting and then trim down verts which didn&#8217;t hold much light or shading information (again, the smoother interior gradients helped a lot on memory&nbsp;here).   </p>
<p>A handy trick - thanks to a suggestion from <a href="https://plus.google.com/113049613359148049737">+Wolfgang Engel</a>  - was small point lights in the windows and doors to add a boost to exterior areas and to make it look as if the characters move from light to shadow, which isn&#8217;t really true.  These had to be very small - much smaller than I wanted - to keep the overdraw costs low in the Crytek deferred renderer. Every house had a handful of somewhat larger lights right near the floor. They watched the sun direction and lit up when the room was facing the sun to provide the illusion of bounce lighting (this wasn&#8217;t really checking the sun, it was checking the orientation of the light (and the house) against a precalculated table of sun positions and elevations so you could figure out how bright a given vector should be at a given time. Would have been much nicer to really sample the sun , but the perf environment was&nbsp;brutal  </p>
<p>The ambient lighting comes from an <span class="caps">HDR</span> cube map -  only one per building, alas, and they didn&#8217;t orient with the placement.  In the end I hand painted abstract ones.  The &#8216;faces&#8217; of the cube are color biased to help pick out the planes of the architecture so it doesn&#8217;t all collapse into mono-color&nbsp;mush.   </p>
<p>Thank God for screen space ambient occlusion, which adds a lot of edge&nbsp;definition.   </p>
<p>And for Super Fudge&nbsp;Chunk.  </p>
<p><span class="caps">PS</span>: Who has seen the bug where Pastor Will flips out on somebody back at base and threatens to &#8220;Cut you like a prison bitch&#8221;?  We heard about it from a tester and unanimously voted it &#8220;Won&#8217;t&nbsp;Fix&#8221;.  </p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>